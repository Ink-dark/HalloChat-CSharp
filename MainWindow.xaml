<Window x:Class="HalloChat_CSharp.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
        xmlns:local="clr-namespace:HalloChat_CSharp"
        mc:Ignorable="d"
        Title="HalloChat"
        Width="1200"
        Height="800"
        MinWidth="800"
        MinHeight="600"
        WindowStartupLocation="CenterScreen"
        ResizeMode="CanResizeWithGrip">
    <Window.Resources>
        <Style TargetType="Button" x:Key="PrimaryButton">
            <Setter Property="Background" Value="#667eea" />
            <Setter Property="Foreground" Value="White" />
            <Setter Property="FontWeight" Value="SemiBold" />
            <Setter Property="Padding" Value="12,6" />
            <Setter Property="Margin" Value="4,4,4,4" />
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}" CornerRadius="6">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center" />
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
        <Style TargetType="Button" x:Key="SecondaryButton">
            <Setter Property="Background" Value="#f7fafc" />
            <Setter Property="Foreground" Value="#4a5568" />
            <Setter Property="BorderBrush" Value="#e2e8f0" />
            <Setter Property="BorderThickness" Value="1" />
            <Setter Property="Padding" Value="12,6" />
            <Setter Property="Margin" Value="4,4,4,4" />
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}" CornerRadius="6">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center" />
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
        <Style TargetType="TextBox" x:Key="MaterialTextBox">
            <Setter Property="Background" Value="#f7fafc" />
            <Setter Property="BorderBrush" Value="#e2e8f0" />
            <Setter Property="BorderThickness" Value="1" />
            <Setter Property="Padding" Value="12,8" />
            <Setter Property="Margin" Value="4,4,4,4" />
            <Setter Property="FontSize" Value="14" />
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="TextBox">
                        <Border Background="{TemplateBinding Background}" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}" CornerRadius="6">
                            <ScrollViewer Margin="0" x:Name="PART_ContentHost" />
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
        <Style TargetType="ListBox" x:Key="MaterialListBox">
            <Setter Property="Background" Value="#ffffff" />
            <Setter Property="BorderBrush" Value="#e2e8f0" />
            <Setter Property="BorderThickness" Value="1" />
            <Setter Property="Margin" Value="4,4,4,4" />
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="ListBox">
                        <Border Background="{TemplateBinding Background}" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}" CornerRadius="8">
                            <ScrollViewer Margin="0" x:Name="PART_ScrollViewer">
                                <ItemsPresenter />
                            </ScrollViewer>
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </Window.Resources>
    <Grid Background="#f7fafc">
        <!-- 顶部标题栏 -->
        <Grid Height="60" Background="#ffffff">
            <StackPanel Orientation="Horizontal" HorizontalAlignment="Left" VerticalAlignment="Center" Margin="20,0,0,0">
                <Image Source="/HalloChat.ico" Width="32" Height="32" Margin="0,0,12,0" />
                <TextBlock Text="HalloChat" FontSize="18" FontWeight="Bold" Foreground="#2d3748" />
            </StackPanel>
            <StackPanel Orientation="Horizontal" HorizontalAlignment="Right" VerticalAlignment="Center" Margin="0,0,20,0">
                <Button x:Name="SettingsButton" Style="{StaticResource SecondaryButton}" Width="40" Height="40" Padding="8" Click="SettingsButton_Click">
                    <materialDesign:PackIcon Kind="Cog" />
                </Button>
                <Button x:Name="LogoutButton" Style="{StaticResource SecondaryButton}" Width="40" Height="40" Padding="8" Click="LogoutButton_Click">
                    <materialDesign:PackIcon Kind="Logout" />
                </Button>
            </StackPanel>
        </Grid>
        
        <!-- 主内容区域 -->
        <Grid Margin="0,60,0,0">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="240" />
                <ColumnDefinition Width="*" />
                <ColumnDefinition Width="300" />
            </Grid.ColumnDefinitions>
            
            <!-- 左侧服务器和联系人列表 -->
            <Grid Grid.Column="0" Background="#ffffff">
                <Grid.RowDefinitions>
                    <RowDefinition Height="auto" />
                    <RowDefinition Height="auto" />
                    <RowDefinition Height="*" />
                </Grid.RowDefinitions>
                
                <!-- 服务器列表 -->
                <StackPanel Grid.Row="0" Margin="16,16,16,8">
                    <TextBlock Text="服务器" FontSize="14" FontWeight="SemiBold" Foreground="#4a5568" Margin="0,0,0,8" />
                    <ListBox x:Name="ServerListBox" Style="{StaticResource MaterialListBox}" Height="120">
                        <ListBox.ItemTemplate>
                            <DataTemplate>
                                <StackPanel Orientation="Horizontal" Margin="12,8" MouseDown="ServerItem_MouseDown">
                                    <materialDesign:PackIcon Kind="Server" Foreground="#667eea" Margin="0,0,12,0" />
                                    <StackPanel>
                                        <TextBlock Text="{Binding Name}" FontSize="14" FontWeight="Medium" Foreground="#2d3748" />
                                        <TextBlock Text="{Binding Address}" FontSize="12" Foreground="#718096" />
                                    </StackPanel>
                                </StackPanel>
                            </DataTemplate>
                        </ListBox.ItemTemplate>
                    </ListBox>
                </StackPanel>
                
                <!-- 联系人列表 -->
                <StackPanel Grid.Row="1" Margin="16,8,16,8">
                    <TextBlock Text="联系人" FontSize="14" FontWeight="SemiBold" Foreground="#4a5568" Margin="0,0,0,8" />
                    <ListBox x:Name="ContactListBox" Style="{StaticResource MaterialListBox}" Height="400">
                        <ListBox.ItemTemplate>
                            <DataTemplate>
                                <StackPanel Orientation="Horizontal" Margin="12,8" MouseDown="ContactItem_MouseDown">
                                    <Ellipse Width="40" Height="40" Fill="#667eea" Margin="0,0,12,0" />
                                    <StackPanel>
                                        <TextBlock Text="{Binding Username}" FontSize="14" FontWeight="Medium" Foreground="#2d3748" />
                                        <TextBlock Text="{Binding Status}" FontSize="12" Foreground="#718096" />
                                    </StackPanel>
                                </StackPanel>
                            </DataTemplate>
                        </ListBox.ItemTemplate>
                    </ListBox>
                </StackPanel>
                
                <!-- 底部操作按钮 -->
                <StackPanel Grid.Row="2" Orientation="Horizontal" HorizontalAlignment="Center" Margin="16,8,16,16">
                    <Button x:Name="AddContactButton" Style="{StaticResource SecondaryButton}" Content="添加联系人" Click="AddContactButton_Click" />
                    <Button x:Name="CreateGroupButton" Style="{StaticResource SecondaryButton}" Content="创建群聊" Click="CreateGroupButton_Click" />
                </StackPanel>
            </Grid>
            
            <!-- 中间聊天窗口 -->
            <Grid Grid.Column="1" Background="#ffffff">
                <Grid.RowDefinitions>
                    <RowDefinition Height="auto" />
                    <RowDefinition Height="*" />
                    <RowDefinition Height="auto" />
                </Grid.RowDefinitions>
                
                <!-- 聊天标题栏 -->
                <Grid Grid.Row="0" Height="60" Background="#f7fafc">
                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Left" VerticalAlignment="Center" Margin="20,0,0,0">
                        <Ellipse Width="40" Height="40" Fill="#667eea" Margin="0,0,12,0" />
                        <StackPanel>
                            <TextBlock x:Name="ChatTitleText" FontSize="16" FontWeight="SemiBold" Foreground="#2d3748" />
                            <TextBlock x:Name="ChatStatusText" FontSize="12" Foreground="#718096" />
                        </StackPanel>
                    </StackPanel>
                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Right" VerticalAlignment="Center" Margin="0,0,20,0">
                        <Button x:Name="EncryptChatButton" Style="{StaticResource SecondaryButton}" Width="40" Height="40" Padding="8" Click="EncryptChatButton_Click">
                            <materialDesign:PackIcon Kind="Lock" />
                        </Button>
                        <Button x:Name="MoreOptionsButton" Style="{StaticResource SecondaryButton}" Width="40" Height="40" Padding="8" Click="MoreOptionsButton_Click">
                            <materialDesign:PackIcon Kind="DotsVertical" />
                        </Button>
                    </StackPanel>
                </Grid>
                
                <!-- 消息列表 -->
                <ListBox x:Name="MessageListBox" Grid.Row="1" Style="{StaticResource MaterialListBox}">
                    <ListBox.ItemTemplate>
                        <DataTemplate>
                            <StackPanel Margin="8">
                                <StackPanel Orientation="Horizontal" HorizontalAlignment="Left">
                                    <StackPanel>
                                        <TextBlock Text="{Binding Username}" FontSize="12" FontWeight="Medium" Foreground="#4a5568" Margin="0,0,0,4" />
                                        <Border Background="#667eea" CornerRadius="8" Padding="12,8" MaxWidth="400">
                                            <TextBlock Text="{Binding Content}" FontSize="14" Foreground="White" TextWrapping="Wrap" />
                                        </Border>
                                    </StackPanel>
                                </StackPanel>
                                <StackPanel Orientation="Horizontal" HorizontalAlignment="Right">
                                    <StackPanel>
                                        <TextBlock Text="{Binding Username}" FontSize="12" FontWeight="Medium" Foreground="#4a5568" Margin="0,0,0,4" HorizontalAlignment="Right" />
                                        <Border Background="#e2e8f0" CornerRadius="8" Padding="12,8" MaxWidth="400">
                                            <TextBlock Text="{Binding Content}" FontSize="14" Foreground="#2d3748" TextWrapping="Wrap" />
                                        </Border>
                                    </StackPanel>
                                </StackPanel>
                            </StackPanel>
                        </DataTemplate>
                    </ListBox.ItemTemplate>
                </ListBox>
                
                <!-- 消息输入区域 -->
                <Grid Grid.Row="2" Height="100" Background="#f7fafc">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="*" />
                        <RowDefinition Height="auto" />
                    </Grid.RowDefinitions>
                    <TextBox x:Name="MessageTextBox" Grid.Row="0" Style="{StaticResource MaterialTextBox}" AcceptsReturn="True" TextWrapping="Wrap" />
                    <StackPanel Grid.Row="1" Orientation="Horizontal" HorizontalAlignment="Right" Margin="0,4,16,16">
                        <Button x:Name="SendMessageButton" Style="{StaticResource PrimaryButton}" Content="发送" Click="SendMessageButton_Click" />
                    </StackPanel>
                </Grid>
            </Grid>
            
            <!-- 右侧设置和其他功能 -->
            <Grid Grid.Column="2" Background="#ffffff">
                <Grid.RowDefinitions>
                    <RowDefinition Height="auto" />
                    <RowDefinition Height="auto" />
                    <RowDefinition Height="*" />
                </Grid.RowDefinitions>
                
                <!-- 用户信息 -->
                <StackPanel Grid.Row="0" Margin="16,16,16,8">
                    <TextBlock Text="用户信息" FontSize="14" FontWeight="SemiBold" Foreground="#4a5568" Margin="0,0,0,8" />
                    <StackPanel Orientation="Horizontal" Margin="12,12" Background="#f7fafc">
                        <Ellipse Width="60" Height="60" Fill="#667eea" Margin="0,0,12,0" />
                        <StackPanel>
                            <TextBlock x:Name="UsernameText" FontSize="16" FontWeight="SemiBold" Foreground="#2d3748" />
                            <TextBlock x:Name="EmailText" FontSize="12" Foreground="#718096" />
                            <TextBlock x:Name="UserIdText" FontSize="12" Foreground="#718096" />
                        </StackPanel>
                    </StackPanel>
                </StackPanel>
                
                <!-- 系统状态 -->
                <StackPanel Grid.Row="1" Margin="16,8,16,8">
                    <TextBlock Text="系统状态" FontSize="14" FontWeight="SemiBold" Foreground="#4a5568" Margin="0,0,0,8" />
                    <StackPanel Margin="12,12" Background="#f7fafc">
                        <StackPanel Orientation="Horizontal" Margin="0,4,0,4">
                            <materialDesign:PackIcon Kind="Wifi" Foreground="#667eea" Margin="0,0,12,0" />
                            <TextBlock x:Name="ConnectionStatusText" FontSize="14" Foreground="#4a5568" />
                        </StackPanel>
                        <StackPanel Orientation="Horizontal" Margin="0,4,0,4">
                            <materialDesign:PackIcon Kind="Clock" Foreground="#667eea" Margin="0,0,12,0" />
                            <TextBlock x:Name="LastOnlineText" FontSize="14" Foreground="#4a5568" />
                        </StackPanel>
                    </StackPanel>
                </StackPanel>
                
                <!-- 功能列表 -->
                <StackPanel Grid.Row="2" Margin="16,8,16,16">
                    <TextBlock Text="功能" FontSize="14" FontWeight="SemiBold" Foreground="#4a5568" Margin="0,0,0,8" />
                    <Button x:Name="ProfileButton" Style="{StaticResource SecondaryButton}" Content="个人资料" Click="ProfileButton_Click" />
                    <Button x:Name="PrivacyButton" Style="{StaticResource SecondaryButton}" Content="隐私设置" Click="PrivacyButton_Click" />
                    <Button x:Name="NotificationButton" Style="{StaticResource SecondaryButton}" Content="通知设置" Click="NotificationButton_Click" />
                    <Button x:Name="AboutButton" Style="{StaticResource SecondaryButton}" Content="关于" Click="AboutButton_Click" />
                </StackPanel>
            </Grid>
        </Grid>
        
        <!-- 设置窗口 -->
        <Grid x:Name="SettingsOverlay" Visibility="Collapsed" Background="#00000080">
            <Grid Margin="300">
                <Border Background="White" CornerRadius="12" Padding="24">
                    <StackPanel>
                        <StackPanel Orientation="Horizontal" HorizontalAlignment="Right">
                            <Button x:Name="CloseSettingsButton" Style="{StaticResource SecondaryButton}" Width="40" Height="40" Padding="8" Click="CloseSettingsButton_Click">
                                <materialDesign:PackIcon Kind="Close" />
                            </Button>
                        </StackPanel>
                        <TextBlock Text="设置" FontSize="20" FontWeight="Bold" Foreground="#2d3748" Margin="0,16,0,16" />
                        <!-- 设置内容 -->
                        <StackPanel Margin="0,16,0,16">
                            <TextBlock Text="语言设置" FontSize="16" FontWeight="SemiBold" Foreground="#4a5568" Margin="0,0,0,12" />
                            <ComboBox x:Name="SettingsLanguageComboBox" Width="200">
                                <ComboBoxItem Content="简体中文" Tag="zh-CN" />
                                <ComboBoxItem Content="繁體中文" Tag="zh-TW" />
                                <ComboBoxItem Content="English" Tag="en-US" />
                                <ComboBoxItem Content="Русский" Tag="ru-RU" />
                            </ComboBox>
                        </StackPanel>
                        <StackPanel Margin="0,16,0,16">
                            <TextBlock Text="通知设置" FontSize="16" FontWeight="SemiBold" Foreground="#4a5568" Margin="0,0,0,12" />
                            <CheckBox x:Name="EnableNotificationsCheckBox" Content="启用通知" />
                            <CheckBox x:Name="EnableSoundCheckBox" Content="启用声音" />
                        </StackPanel>
                        <Button x:Name="SaveSettingsButton" Style="{StaticResource PrimaryButton}" Content="保存设置" Click="SaveSettingsButton_Click" />
                    </StackPanel>
                </Border>
            </Grid>
        </Grid>
    </Grid>
</Window>